<div class="book-manager-container">
  <h2>مكتبتي</h2>

  <table class="book-table">
    <thead>
      <tr>
        <th>العنوان</th>
        <th>المؤلف</th>
        <th>الإجراءات</th>
      </tr>
    </thead>
    <tbody>
      <!-- إضافة كتاب جديد -->
      <tr>
        <td><input [(ngModel)]="newBook.title" placeholder="عنوان الكتاب" /></td>
        <td><input [(ngModel)]="newBook.author" placeholder="اسم المؤلف" /></td>
        <td><button (click)="addBook()">إضافة</button></td>
      </tr>

      <!-- عرض الكتب -->
      <tr *ngFor="let book of books">
        <ng-container *ngIf="editingBook?.id !== book.id; else editRow">
          <td>{{ book.title }}</td>
          <td>{{ book.author }}</td>
          <td>
            <button (click)="startEdit(book)">تعديل</button>
            <button (click)="deleteBook(book.id!)">حذف</button>
          </td>
        </ng-container>

        <!-- صف التعديل -->
        <ng-template #editRow>
          <td><input [(ngModel)]="editingBook.title" /></td>
          <td><input [(ngModel)]="editingBook.author" /></td>
          <td>
            <button (click)="saveEdit()">حفظ</button>
            <button (click)="cancelEdit()">إلغاء</button>
          </td>
        </ng-template>
      </tr>
    </tbody>
  </table>
</div>
